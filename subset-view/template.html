<div>
   <style>
      .popover-class-danger {
         color: #a94442;
         background-color: #f2dede;
         border-color: #ebccd1;
      }

      .popover-class-warning {
         color: #8a6d3b;
         background-color: #fcf8e3;
         border-color: #faebcc;
      }

      .badge-text {
         font-size: 1.2em;
      }
   </style>
   <!--SEARCH SUBSET BY DIMENSION-->
   <div class="row">
      <div class="col-md-12">
         <uib-tabset active="active">
            <uib-tab index="0" heading="Subsets per Views" select="tabSelected($event)">
               <div class="toolbar">            
                  <div class="btn-toolbar pull-left">
                     <div class="input-group">
                        <div class="input-group-prepend">
                           <input type="text" ng-model="select.filterallSubsetsPerView" placeholder="Search"
                              class="form-control ng-pristine ng-untouched ng-valid ng-empty"
                              style="display:inline; width:200px;" autocomplete="off">
                        </div>
                        <div class="input-group-append input-group-prepend">
                           <button class="btn btn-secondary" title="Refresh" ng-click="refresh()">
                              <i class="fa fa-fw fa-refresh"></i>
                           </button>
                        </div>
                        <div class="input-group-append">
                           <button ng-disabled="saving || !viewsToDelete.length" class="btn btn-secondary"
                              title="Delete" ng-click="openModalView()" disabled="disabled">
                              <i class="fa fa-fw fa-trash"></i>
                           </button>
                        </div>
                     </div>
                  </div>
               </div> 
               <div class="row mt-2">
                  <div class="col-md-12">
                     <auto-height>
                        <table class="table table-hover table-sm">
                           <thead>
                              <tr>
                                 <th> # </th>
                                 <th colspan="2"> <i class="fa view mr-1"></i> {{lists.allSubsetsPerView.length}} <span translate="VIEWS"></span> </th>
                                 <th> <i class="fa cubes mr-1"></i><span translate="CUBES"></span> </th>
                                 <th> <img src="__/images/table-col-black.svg" class="cube-viewer-icon" style="width:15px;height:15px"> <span translate="SUBSETSONROWS"></span></th>
                                 <th> <img src="__/images/table-row-black.svg" class="cube-viewer-icon" style="width:15px;height:15px"> <span translate="SUBSETSONCOLUMNS"></span></th>
                                 <th> <img src="__/images/table-title-black.svg" class="cube-viewer-icon" style="width:15px;height:15px"> <span translate="SUBSETSONTITLES"></span> </th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr
                                 ng-repeat="item in lists.allSubsetsPerView | filter:select.filterallSubsetsPerView track by $index">
                                 <td class="text-center">
                                    <span class="ng-binding">{{$index+1}}</span>
                                 </td>
                                 <td>
                                    <input style="margin-top:5px" type="checkbox" ng-disabled="item.chores.length"
                                       ng-model="item.change" ng-change="toggleDeleteView(item)">
                                 </td> 
                                 <td>
                                    <a href="#/cube/{{instance}}/{{item.cube}}/view/{{item.viewName}}">
                                       
                                       <span title="{{item.cube}}:{{item.viewName}}">
                                          {{item.viewName}}
                                       </span>
                                    </a>
                                    
                                 </td>                                                                 
                                 <td>
                                    {{item.cube}}
                              </td>
                                 <td>
                                    <div ng-repeat="subset in item.subsetsRow track by $index" class="badge ml-1"
                                       ng-style="generateHSLColour(subset.fullName)" ng-click="">
                                       <span class="badge-text">
                                          <a style="color:white"
                                             href="#/dimension/{{instance}}/{{subset.dimension}}/{{subset.hierarchy}}/subset/{{subset.name}}">
                                             {{subset.dimension}}:{{subset.name}}
                                          </a>    
                                          <a href="">                                      
                                             <i ng-if="tm1VersionSupported" class="fa fa-w fa-retweet click" aria-hidden="true"
                                             ng-click="openModalReplaceSubset(item,subset)" style="color:white"
                                             title="{{'REPLACESUBSET' | translate}}"></i>
                                          </a>
                                       </span>
                                    </div>
                                 </td>
                                 <td>
                                    <div ng-repeat="subset in item.subsetsColumn track by $index" class="badge ml-1"
                                       ng-style="generateHSLColour(subset.fullName)" ng-click="">
                                       <span class="badge-text">
                                          <a style="color:white"
                                             href="#/dimension/{{instance}}/{{subset.dimension}}/{{subset.hierarchy}}/subset/{{subset.name}}">
                                             {{subset.dimension}}:{{subset.name}}
                                          </a>                                          
                                          <i ng-if="tm1VersionSupported" class="fa fa-w fa-retweet click" aria-hidden="true" style="color:white"
                                             ng-click="openModalReplaceSubset(item,subset)"
                                             title="{{'REPLACESUBSET' | translate}}"></i>
                                       </span>
                                    </div>
                                 </td>
                                 <td>
                                    <div ng-repeat="subset in item.subsetsTitle track by $index" class="badge ml-1"
                                       ng-style="generateHSLColour(subset.fullName)" ng-click="">
                                       <span class="badge-text">
                                          <a style="color:white"
                                             href="#/dimension/{{instance}}/{{subset.dimension}}/{{subset.hierarchy}}/subset/{{subset.name}}">
                                             {{subset.dimension}}:{{subset.name}}
                                          </a>                                          
                                          <i ng-if="tm1VersionSupported" class="fa fa-w fa-retweet click" aria-hidden="true" style="color:white"
                                             style="cursor:pointer" ng-click="openModalReplaceSubset(item,subset)"
                                             title="{{'REPLACESUBSET' | translate}}"></i>
                                       </span>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </auto-height>
                  </div>
               </div>
            </uib-tab>
            <uib-tab index="1" heading="Views per Subsets" select="tabSelected($event)">
               <div class="toolbar">
            
                  <div class="btn-toolbar pull-left">
                     <div class="input-group">
                        <div class="input-group-prepend">
                           <input type="text" ng-model="select.filterallViewsPerSubset" placeholder="Search"
                              class="form-control ng-pristine ng-untouched ng-valid ng-empty"
                              style="display:inline; width: 200px;" autocomplete="off">
                        </div>
                        <div class="input-group-append input-group-prepend">
                           <button class="btn btn-secondary" title="Refresh" ng-click="refresh()">
                              <i class="fa fa-fw fa-refresh"></i>
                           </button>
                        </div>
                        <div class="input-group-append">
                           <button ng-disabled="saving || !subsetsToDelete.length" class="btn btn-secondary"
                              title="Delete" ng-click="openModalSubset()" disabled="disabled">
                              <i class="fa fa-fw fa-trash"></i>
                           </button>
                        </div>
                     </div>
                  </div>
               </div> 
               <div class="row mt-2">
                  <div class="col-md-12">
                     <auto-height>
                        <table class="table table-hover table-sm">
                           <thead>
                              <tr>
                                 <th> # </th>
                                 <th colspan="3"> <i class="fa subset mr-1"></i> {{lists.allViewsPerSubset.length}} <span translate="SUBSETS"></span> </th>                                 
                                 <th style="min-width:110px"> <i class="fa dimension mr-1"></i> <span translate="DIMENSIONS"></span> </th> 
                                 <th> <i class="fa view mr-1"></i> <span translate="VIEWS"></span> </th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr ng-repeat="item in lists.allViewsPerSubset | filter:select.filterallViewsPerSubset track by $index">
                                 <td class="text-center">
                                    <span class="ng-binding">{{$index+1}}</span>
                                 </td>
                                 <td>
                                       <input style="margin-top:5px" type="checkbox" ng-disabled="item.chores.length"
                                       ng-model="item.change" ng-change="toggleDeleteSubset(item)">
                                 <td>
                                    <a href="">
                                       <i ng-if="tm1VersionSupported" class="fa fa-retweet fa-fw text-warning click" style="color:white"
                                       aria-hidden="true" style="cursor:pointer"
                                       ng-click="openModalReplaceSubset(item.views,item)"
                                       title="{{'REPLACESUBSET' | translate}}"></i>
                                      </a> 
                                 </td>
                                 </td>
                                 <td>
                                    <a
                                       href="#/dimension/{{instance}}/{{item.dimension}}/{{item.hierarchy}}/subset/{{item.subsetName}}"
                                       >
                                       <span title="{{item.dimension}}:{{item.subsetName}}">
                                          {{item.subsetName}}
                                       </span>
                                    </a>
                                 </td>
                                 <td>
                                    {{item.dimension}}
                                 </td>
                                 <td>
                                    <div ng-repeat="view in item.views track by $index" class="badge ml-1"
                                       ng-style="generateHSLColour(view.fullName)" style="cursor:default;" ng-click="">
                                       <span class="badge-text">
                                          <a style="color:white"
                                             href="#/cube/{{instance}}/{{view.cube}}/view/{{view.name}}">
                                             {{view.cube}}:{{view.name}}
                                          </a>
                                       </span>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </auto-height>
                  </div>
               </div>
            </uib-tab>
         </uib-tabset>
      </div>
   </div>


</div>